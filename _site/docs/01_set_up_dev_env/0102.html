<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Setup an image | Your awesome title</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Setup an image" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/docs/01_set_up_dev_env/0102.html" /> <meta property="og:url" content="http://localhost:4000/docs/01_set_up_dev_env/0102.html" /> <meta property="og:site_name" content="Your awesome title" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Setup an image" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Setup an image","url":"http://localhost:4000/docs/01_set_up_dev_env/0102.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Your awesome title </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 01: Set up development environment category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/01_set_up_dev_env/01_set_up_development_environment.html" class="nav-list-link">Exercise 01: Set up development environment</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0101.html" class="nav-list-link">1. Deploy the necessary prerequisites needed for a Microsoft Dev Box</a></li><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0102.html" class="nav-list-link">2. Setup an image</a></li><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0103.html" class="nav-list-link">3. Deploy a Microsoft Dev Box</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 02: Start working in GitHub category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_start_working_github/02_start_working_in_github.html" class="nav-list-link">Exercise 02: Start working in GitHub</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/02_start_working_github/0201.html" class="nav-list-link">1. Set up a GitHub repository</a></li><li class="nav-list-item"><a href="/docs/02_start_working_github/0202.html" class="nav-list-link">2. Track your work</a></li><li class="nav-list-item"><a href="/docs/02_start_working_github/0203.html" class="nav-list-link">3. Set up a GitHub Actions workflow</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 03: Improve and deploy your application category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/03_improve_deploy_app/03_improve_and_deploy_your_application.html" class="nav-list-link">Exercise 03: Improve and deploy your application</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0301.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0302.html" class="nav-list-link">2. Change the application</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0303.html" class="nav-list-link">3. Introduce infrastructure as code</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0304.html" class="nav-list-link">4. Build, Push, and Deploy Changes</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 04: Implement load testing and secure practices category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/04_implement_load_testing/04_implement_load_testing_and_secure_practices.html" class="nav-list-link">Exercise 04: Implement load testing and secure practices</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0401.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0402.html" class="nav-list-link">2. Run a load test from GitHub Actions</a></li><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0403.html" class="nav-list-link">3. Identifying bottlenecks, stress tests, and resilience testing</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 05: Make things secure category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/05_make_things_secure/05_make_things_secure.html" class="nav-list-link">Exercise 05: Make things secure</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/05_make_things_secure/0501.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/05_make_things_secure/0502.html" class="nav-list-link">2. Ensure your code is secure</a></li><li class="nav-list-item"><a href="/docs/05_make_things_secure/0503.html" class="nav-list-link">3. Monitoring with Application Insights</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Your awesome title" aria-label="Search Your awesome title" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/01_set_up_dev_env/01_set_up_development_environment.html">Exercise 01: Set up development environment</a></li> <li class="breadcrumb-nav-list-item"><span>2. Setup an image</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="task-02---setup-an-image-90-minutes"> <a href="#task-02---setup-an-image-90-minutes" class="anchor-heading" aria-labelledby="task-02---setup-an-image-90-minutes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Task 02 - Setup an image (90 minutes) </h1> <h2 id="description"> <a href="#description" class="anchor-heading" aria-labelledby="description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>Typically, when a developer needs to have an environment configured for their development tasks, they need software deployed, specific versions of tools and source code, any other configurations for their development tasks. This can be a time-consuming process, particularly when onboarding a new developer or switching to a new development project.</p> <p>If developers are working on multiple projects, they may even have challenges with those different projects requiring different versions of the same software. In this task, you’ll setup an image to be used for Dev Box. This enables most of these things to be preconfigured so as soon as a user is onboarded or needs to work on a different project, an environment can be quickly spun up for them from an image.</p> <ol> <li>Create a compute gallery &amp; add it to the Dev center</li> <li> <p>Create a custom image using Windows 11 Enterprise, version 22H2 - x64 Gen2</p> <blockquote class="note"> <p>Make sure you select enterprise and not pro. Pro is not supported for Dev Box.</p> </blockquote> </li> <li>Include the following software on the custom image. If you have any issues selecting and copying the link you can also right click the link and select “Copy Link”. <ul> <li>Docker (without WSL) <ul> <li><a href="https://docs.docker.com/desktop/install/windows-install/">https://docs.docker.com/desktop/install/windows-install/</a></li> </ul> <blockquote class="note"> <p>Make sure to UNCHECK to use WSL during installation. This will cause issue with docker</p> </blockquote> </li> <li>Visual Studio Code (System Installer): <ul> <li><a href="https://code.visualstudio.com/Download">https://code.visualstudio.com/Download</a></li> <li>Make sure this finishes before installing Git so you can set it as the default editor</li> </ul> </li> <li>Java (for JMeter): <ul> <li><a href="https://www.java.com/en/download/">https://www.java.com/en/download/</a></li> </ul> </li> <li>Apache JMeter: <ul> <li><a href="https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.6.2.zip">https://dlcdn.apache.org//jmeter/binaries/apache-jmeter-5.6.2.zip</a></li> <li>Extract the apache-jmeter-5.6.2 folder to C:\</li> </ul> </li> <li>Azure Storage Explorer (Install for all users): <ul> <li><a href="https://azure.microsoft.com/products/storage/storage-explorer/">https://azure.microsoft.com/products/storage/storage-explorer/</a></li> </ul> </li> <li>Git bash: <ul> <li><a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a></li> <li>64bit git for Windows Setup</li> <li>You may want to set the default editor to VSCode, keep the defaults for everything else.</li> </ul> </li> <li>.NET SDK 6.0 LTS: <ul> <li><a href="https://dotnet.microsoft.com/download/visual-studio-sdks">https://dotnet.microsoft.com/download/visual-studio-sdks</a></li> <li>.NET 6.0 x64 Visual Studio 2022 SDK</li> </ul> </li> <li>Firefox: <ul> <li><a href="https://www.mozilla.org/en-US/firefox/new/">https://www.mozilla.org/en-US/firefox/new/</a>.</li> <li>Firefox is useful because it allows you to create a manual proxy rather than using Windows defaults, as Chrome and Edge require. This will be helpful in Exercise 4.</li> </ul> </li> </ul> </li> <li> <p>Reboot after installing all of the software and ensure that Docker is running before performing a sysprep.</p> <blockquote class="important"> <p>At this point in time, take a snapshot of the OS disk on your VM so you can make updates to it later if needed. Once you sysprep a VM you can’t boot it back up again to make changes.</p> </blockquote> </li> <li>Perform sysprep. To do so: <ul> <li>Delete C:\Windows\Panther and empty the recycle bin</li> <li>In the command prompt, CD to C:\Windows\System32\SysPrep and run <code class="language-plaintext highlighter-rouge">sysprep.exe /oobe /generalize /shutdown</code></li> </ul> </li> <li>Create the new image <ul> <li>For the VM image definition, create a new one with the name “DevBoxProject” and leave everything else as default</li> <li>VM version number can be 1.0.0</li> <li>Default storage SKU: Premium SD LRS</li> <li>Review + create –&gt; Create</li> </ul> </li> </ol> <blockquote class="important"> <p>It can take anywhere from 20 minutes to an hour to create the image. If it still hasn’t completed after 15 or 20 minutes. You can start on Exercise 2 using a different machine. Task 3 of exercise 1 depends on the completely of this image creating. It is ok to use your own computer for Day 1 and use the Dev Box on day 2.</p> </blockquote> <h2 id="success-criteria"> <a href="#success-criteria" class="anchor-heading" aria-labelledby="success-criteria"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Success Criteria </h2> <ul> <li>You have created a compute gallery and added it to the Dev center.</li> <li>You have created a custom image with all relevant software installed.</li> </ul> <h2 id="learning-resources"> <a href="#learning-resources" class="anchor-heading" aria-labelledby="learning-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Learning Resources </h2> <ul> <li><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/create-gallery?tabs=portal%2Cportaldirect%2Ccli2">Create an Azure Compute gallery</a></li> <li><a href="https://learn.microsoft.com/azure/dev-box/quickstart-configure-dev-box-service?tabs=AzureADJoin#3-create-a-dev-box-definition">Create a Dev Box Definition</a></li> <li><a href="https://learn.microsoft.com/azure/virtual-machines/generalize">Generalize a VM</a></li> <li><a href="https://learn.microsoft.com/azure/virtual-machines/capture-image-portal">Create an image from a VM</a></li> </ul> <h2 id="tips"> <a href="#tips" class="anchor-heading" aria-labelledby="tips"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tips </h2> <ul> <li>For the image creation, use the VM Size: Standard D4s v3 (4 vCPUs, 16 GiB memory) with a Windows 10 or 11 Image</li> <li>After running sysprep on a virtual machine in Azure, you can’t use it again, so you can delete the VM along with it’s associated resources (NIC, Disk, etc.)</li> <li>For security, once you create the VM with RDP access, go into the networking settings and set the RDP access Source to be limited to your IP address</li> <li>If you do need to make changes to your VM after you ran sysprep, you’ll need to restore from the snapshot <ol> <li>Create a new disk from the snapshot</li> <li>Create a new VM from the new managed disk</li> <li>Make your updates on the VM</li> <li>Create a new snapshot</li> <li>Run sysprep again.</li> </ol> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
