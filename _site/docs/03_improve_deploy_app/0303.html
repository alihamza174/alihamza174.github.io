<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Introduce infrastructure as code | Your awesome title</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Introduce infrastructure as code" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/docs/03_improve_deploy_app/0303.html" /> <meta property="og:url" content="http://localhost:4000/docs/03_improve_deploy_app/0303.html" /> <meta property="og:site_name" content="Your awesome title" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Introduce infrastructure as code" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Introduce infrastructure as code","url":"http://localhost:4000/docs/03_improve_deploy_app/0303.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Your awesome title </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 01: Set up development environment category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/01_set_up_dev_env/01_set_up_development_environment.html" class="nav-list-link">Exercise 01: Set up development environment</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0101.html" class="nav-list-link">1. Deploy the necessary prerequisites needed for a Microsoft Dev Box</a></li><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0102.html" class="nav-list-link">2. Setup an image</a></li><li class="nav-list-item"><a href="/docs/01_set_up_dev_env/0103.html" class="nav-list-link">3. Deploy a Microsoft Dev Box</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 02: Start working in GitHub category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/02_start_working_github/02_start_working_in_github.html" class="nav-list-link">Exercise 02: Start working in GitHub</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/02_start_working_github/0201.html" class="nav-list-link">1. Set up a GitHub repository</a></li><li class="nav-list-item"><a href="/docs/02_start_working_github/0202.html" class="nav-list-link">2. Track your work</a></li><li class="nav-list-item"><a href="/docs/02_start_working_github/0203.html" class="nav-list-link">3. Set up a GitHub Actions workflow</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 03: Improve and deploy your application category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/03_improve_deploy_app/03_improve_and_deploy_your_application.html" class="nav-list-link">Exercise 03: Improve and deploy your application</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0301.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0302.html" class="nav-list-link">2. Change the application</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0303.html" class="nav-list-link">3. Introduce infrastructure as code</a></li><li class="nav-list-item"><a href="/docs/03_improve_deploy_app/0304.html" class="nav-list-link">4. Build, Push, and Deploy Changes</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 04: Implement load testing and secure practices category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/04_implement_load_testing/04_implement_load_testing_and_secure_practices.html" class="nav-list-link">Exercise 04: Implement load testing and secure practices</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0401.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0402.html" class="nav-list-link">2. Run a load test from GitHub Actions</a></li><li class="nav-list-item"><a href="/docs/04_implement_load_testing/0403.html" class="nav-list-link">3. Identifying bottlenecks, stress tests, and resilience testing</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 05: Make things secure category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/05_make_things_secure/05_make_things_secure.html" class="nav-list-link">Exercise 05: Make things secure</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/05_make_things_secure/0501.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/05_make_things_secure/0502.html" class="nav-list-link">2. Ensure your code is secure</a></li><li class="nav-list-item"><a href="/docs/05_make_things_secure/0503.html" class="nav-list-link">3. Monitoring with Application Insights</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Your awesome title" aria-label="Search Your awesome title" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/03_improve_deploy_app/03_improve_and_deploy_your_application.html">Exercise 03: Improve and deploy your application</a></li> <li class="breadcrumb-nav-list-item"><span>3. Introduce infrastructure as code</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="task-03---introduce-infrastructure-as-code-20-minutes"> <a href="#task-03---introduce-infrastructure-as-code-20-minutes" class="anchor-heading" aria-labelledby="task-03---introduce-infrastructure-as-code-20-minutes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Task 03 - Introduce infrastructure as code (20 minutes) </h1> <h2 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>Now that we have some code, we need an environment to deploy it to! The term Infrastructure as Code (IaC) refers to using code-based templates repeatedly and consistently to create the dev, test, and prod infrastructure environments. We can automate the deployment of Azure services we need with an Azure Resource Manager (ARM), Bicep, or other type of template, which we can invoke as part of a GitHub Actions workflow.</p> <p>Review the following articles:</p> <ul> <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview">Azure Resource Manager overview</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/how-to-create-template">Create Azure Resource Manager template</a></li> </ul> <h2 id="description"> <a href="#description" class="anchor-heading" aria-labelledby="description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>In this task, you will deploy out new Azure infrastructure for the Munson’s Pickles and Preserves Team Messaging System. You will deploy this to three environments: <code class="language-plaintext highlighter-rouge">dev</code>, <code class="language-plaintext highlighter-rouge">test</code>, and <code class="language-plaintext highlighter-rouge">prod</code>. Each environment will have its own Web App, though for the sake of this proof of concept, all environments will share a single resource group, App Service Plan, Application Insights instance, and Azure Container Registry.</p> <p>We will use GitHub Actions to automate the deployment of our Azure infrastructure. For our application, we will deploy 3 environments: <code class="language-plaintext highlighter-rouge">dev</code>, <code class="language-plaintext highlighter-rouge">test</code> and <code class="language-plaintext highlighter-rouge">prod</code>. Each environment will have its own Web App. For the sake of this proof of concept, however, all of our environments will share a single Resource Group, App Service Plan, Application Insights instance, and Azure Container Registry.</p> <blockquote class="note"> <p>We have laid out the resources in a single resource group for this training for two reasons. The first reason is to facilitate ease of cleanup at the end, as you will only need to delete one resource group. The other reason is to reduce the cost of training, as you will create only one App Service Plan and one Application Insights instance. In a real scenario, you would likely create separate resources for each environment, either in separate resource groups on the same subscription or separate resource groups in different subscriptions.</p> </blockquote> <ol> <li>Review the Bicep template. Notice how it includes the configuration settings for an App Service Plan, a Web App, Application Insights, and Azure Container Registry into your resource group.</li> <li>Review the use of the <code class="language-plaintext highlighter-rouge">uniqueString</code> function. This helps create unique names for your resources. This function is not random, but is instead a hash function based on your resource group ID, which provides a consistent but likely unique 13-character string. This function is useful to avoid naming conflicts in Azure.</li> <li>Review the <code class="language-plaintext highlighter-rouge">environment</code> and <code class="language-plaintext highlighter-rouge">location</code> parameters. These have default values but you are able to override them as well in order to create other resources in different environments.</li> <li>Create a resource group. Then, create a service principal to log into Azure. The service principal should have Contributor access to the resource group you just created. You can create this service principal with the following steps: <ul> <li>Create an Application registration and service principal in Microsoft Entra ID, either through the Azure portal or az cli. <ul> <li> <p>If using the command line use <code class="language-plaintext highlighter-rouge">az ad sp create-for-rbac</code> to create a JSON output containing client details, including the client ID and client secret. Copy that JSON output. If you are not using the command line, ensure that you can generate client details in a format like the following:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{client_id}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientSecret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{some string value}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{subscription_id}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{tenant_id}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"activeDirectoryEndpointUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://login.microsoftonline.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resourceManagerEndpointUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://management.azure.com/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"activeDirectoryGraphResourceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://graph.windows.net/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sqlManagementEndpointUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://management.core.windows.net:8443/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"galleryEndpointUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://gallery.azure.com/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"managementEndpointUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://management.core.windows.net/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div> </div> </li> </ul> </li> </ul> </li> <li>Create a GitHub repository-level secret to store the service principal’s credentials, calling it <code class="language-plaintext highlighter-rouge">AZURE_CREDENTIALS</code>. Create a second repository-level secret to store the name of the Azure resource group, calling this <code class="language-plaintext highlighter-rouge">AZURE_RG</code>. Create a third repository-level secret to store the name of the Azure subscription, calling it <code class="language-plaintext highlighter-rouge">AZURE_SUBSCRIPTION_ID</code>.</li> <li>Create a new GitHub Actions workflow called <code class="language-plaintext highlighter-rouge">deploy.yml</code>. This workflow should run on a manual trigger–that is, <em>not</em> triggered by a push or pull request.</li> <li>Configure the workflow to accomplish the following tasks: <ol> <li>Use a service principal to log into Azure using your secret and configuration variable values.</li> <li>Use the “Deploy Azure Resource Manager (ARM) Template” action to call the Bicep template in your repo.</li> </ol> <blockquote class="note"> <p>The name is a little confusing here as this action supports both ARM and Bicep as the template file. This is because Bicep is a transparent abstraction of ARM. For more details check out <a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/overview?tabs=bicep">this article</a>.</p> </blockquote> </li> <li>Manually run your workflow. When your workflow completes successfully, go to the Azure portal to see the <code class="language-plaintext highlighter-rouge">dev</code> environment.</li> <li>Run the workflow a second time, this time overriding the environment parameter with <code class="language-plaintext highlighter-rouge">test</code> instead of <code class="language-plaintext highlighter-rouge">dev</code>. When your workflow completes successfully, go to the Azure portal to see the new <code class="language-plaintext highlighter-rouge">test</code> App Service.</li> <li>Run the workflow a third time, this time overriding the environment parameter with <code class="language-plaintext highlighter-rouge">prod</code> instead of <code class="language-plaintext highlighter-rouge">dev</code>. When your workflow completes successfully, go to the Azure portal to see the new <code class="language-plaintext highlighter-rouge">prod</code> App Service.</li> <li>Ensure that Application Insights is enabled for each of the three App Services.</li> </ol> <h2 id="success-criteria"> <a href="#success-criteria" class="anchor-heading" aria-labelledby="success-criteria"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Success Criteria </h2> <ul> <li>Your <code class="language-plaintext highlighter-rouge">deploy.yaml</code> workflow completes without any errors and overrides the <code class="language-plaintext highlighter-rouge">environment</code> parameter when calling the Bicep template.</li> <li>Your resource group contains 6 resources: 3 App Services (dev, test, prod), 1 Application Insights, 1 App Service plan and 1 Container registry.</li> </ul> <h2 id="learning-resources"> <a href="#learning-resources" class="anchor-heading" aria-labelledby="learning-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Learning Resources </h2> <ul> <li><a href="https://github.com/Azure/login">Azure Login GitHub Action</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/devops/learn/what-is-infrastructure-as-code">What is Infrastructure as Code?</a></li> <li><a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets">Secrets in GitHub Actions</a></li> <li><a href="https://docs.github.com/en/actions/learn-github-actions/variables#creating-configuration-variables-for-a-repository">Configuration Variables in GitHub Actions</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-github-actions">Deploy Bicep and Azure Resource Manager templates by using GitHub Actions</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-cli#parameters">Overriding ARM template parameters</a></li> </ul> <p>If you are interested in learning more about Infrastructure as Code, there are multiple <a href="https://aka.ms/wth">What the Hacks</a> that cover it in greater depth:</p> <ul> <li><a href="https://microsoft.github.io/WhatTheHack/045-InfraAsCode-Bicep/">Infrastructure As Code: Bicep</a></li> <li><a href="https://microsoft.github.io/WhatTheHack/011-InfraAsCode-ARM-DSC/">Infrastructure As Code: ARM Templates &amp; PowerShell DSC</a></li> <li><a href="https://microsoft.github.io/WhatTheHack/012-InfraAsCode-Terraform/Student/">Infrastructure As Code: Terraform</a></li> <li><a href="https://microsoft.github.io/WhatTheHack/013-InfraAsCode-Ansible/Student/">Infrastructure As Code: Ansible</a></li> </ul> <h2 id="advanced-challenges-optional"> <a href="#advanced-challenges-optional" class="anchor-heading" aria-labelledby="advanced-challenges-optional"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced Challenges (optional) </h2> <p>Instead of changing the environment variable for each environment that we want to create in <code class="language-plaintext highlighter-rouge">deploy.yml</code>, you can configure the workflow to prompt the user to enter the environment name before the workflow runs. This eliminates the need to hardcode the environment name.</p> <ul> <li>Configure your workflow to collect the environment name as a <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#onworkflow_callinputs">workflow input</a> and use that value to override the environment parameter when calling the Bicep template.</li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
