<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/docs/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/docs/assets/js/vendor/lunr.min.js"></script> <script src="/docs/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Build, Push, and Deploy Changes | Your awesome title</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="Build, Push, and Deploy Changes" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/docs/docs/03_improve_deploy_app/0304.html" /> <meta property="og:url" content="http://localhost:4000/docs/docs/03_improve_deploy_app/0304.html" /> <meta property="og:site_name" content="Your awesome title" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Build, Push, and Deploy Changes" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Build, Push, and Deploy Changes","url":"http://localhost:4000/docs/docs/03_improve_deploy_app/0304.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/docs/" class="site-title lh-tight"> Your awesome title </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 01: Set up development environment category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/docs/01_set_up_dev_env/01_set_up_development_environment.html" class="nav-list-link">Exercise 01: Set up development environment</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/docs/01_set_up_dev_env/0101.html" class="nav-list-link">1. Deploy the necessary prerequisites needed for a Microsoft Dev Box</a></li><li class="nav-list-item"><a href="/docs/docs/01_set_up_dev_env/0102.html" class="nav-list-link">2. Setup an image</a></li><li class="nav-list-item"><a href="/docs/docs/01_set_up_dev_env/0103.html" class="nav-list-link">3. Deploy a Microsoft Dev Box</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 02: Start working in GitHub category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/docs/02_start_working_github/02_start_working_in_github.html" class="nav-list-link">Exercise 02: Start working in GitHub</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/docs/02_start_working_github/0201.html" class="nav-list-link">1. Set up a GitHub repository</a></li><li class="nav-list-item"><a href="/docs/docs/02_start_working_github/0202.html" class="nav-list-link">2. Track your work</a></li><li class="nav-list-item"><a href="/docs/docs/02_start_working_github/0203.html" class="nav-list-link">3. Set up a GitHub Actions workflow</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 03: Improve and deploy your application category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/docs/03_improve_deploy_app/03_improve_and_deploy_your_application.html" class="nav-list-link">Exercise 03: Improve and deploy your application</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/docs/03_improve_deploy_app/0301.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/docs/03_improve_deploy_app/0302.html" class="nav-list-link">2. Change the application</a></li><li class="nav-list-item"><a href="/docs/docs/03_improve_deploy_app/0303.html" class="nav-list-link">3. Introduce infrastructure as code</a></li><li class="nav-list-item"><a href="/docs/docs/03_improve_deploy_app/0304.html" class="nav-list-link">4. Build, Push, and Deploy Changes</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 04: Implement load testing and secure practices category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/docs/04_implement_load_testing/04_implement_load_testing_and_secure_practices.html" class="nav-list-link">Exercise 04: Implement load testing and secure practices</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/docs/04_implement_load_testing/0401.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/docs/04_implement_load_testing/0402.html" class="nav-list-link">2. Run a load test from GitHub Actions</a></li><li class="nav-list-item"><a href="/docs/docs/04_implement_load_testing/0403.html" class="nav-list-link">3. Identifying bottlenecks, stress tests, and resilience testing</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Exercise 05: Make things secure category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/docs/docs/05_make_things_secure/05_make_things_secure.html" class="nav-list-link">Exercise 05: Make things secure</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/docs/05_make_things_secure/0501.html" class="nav-list-link">1. Configure Microsoft Copilot on your Dev Box</a></li><li class="nav-list-item"><a href="/docs/docs/05_make_things_secure/0502.html" class="nav-list-link">2. Ensure your code is secure</a></li><li class="nav-list-item"><a href="/docs/docs/05_make_things_secure/0503.html" class="nav-list-link">3. Monitoring with Application Insights</a></li></ul></li><li class="nav-list-item"><a href="/docs/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Your awesome title" aria-label="Search Your awesome title" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/docs/docs/03_improve_deploy_app/03_improve_and_deploy_your_application.html">Exercise 03: Improve and deploy your application</a></li> <li class="breadcrumb-nav-list-item"><span>4. Build, Push, and Deploy Changes</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="task-04---build-push-and-deploy-changes-40-minutes"> <a href="#task-04---build-push-and-deploy-changes-40-minutes" class="anchor-heading" aria-labelledby="task-04---build-push-and-deploy-changes-40-minutes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Task 04 - Build, Push, and Deploy Changes (40 minutes) </h1> <h2 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>With our Azure resources created, we have laid out the foundation for our application. Now, we must connect our source code with its destination. The first step in this journey is called Continuous Integration (CI).</p> <p>Continuous Integration is the process of merging local code changes into source control and may include steps to automatically build and test the code. Effective Continuous Integration allows developers rapidly to iterate and collaborate. It also helps ensure that newly added code does not break the current application.</p> <p>Review the following articles:</p> <ul> <li><a href="https://docs.github.com/en/actions/building-and-testing-code-with-continuous-integration/about-continuous-integration">About continuous integration</a></li> <li><a href="https://docs.github.com/en/actions/building-and-testing-code-with-continuous-integration/setting-up-continuous-integration-using-github-actions">Setting up continuous integration using workflow templates</a></li> </ul> <p>The next practical step is to extend our workflow with steps to build a Docker image and push it to Azure Container Registry (ACR). After that, we will configure the Web App to pull this image from ACR.</p> <p>Containers are a great way to package and deploy applications consistently across environments. If you are new to containers, there are 3 key steps to creating and publishing an image, which we will cover below. Because this training focuses on DevOps and not containers, we’ve strived to make this task as straightforward as possible.</p> <ol> <li> <p><code class="language-plaintext highlighter-rouge">docker login</code> - You need to log into the container registry into which you will push your image. These generally require authentication from an authorized user, as that will prevent unauthorized individuals from publishing images in your registry.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">docker build</code> - The second step is to request that Docker (running locally on your machine or on your build server) create the container image. A <em>critical</em> component of this is the <code class="language-plaintext highlighter-rouge">Dockerfile</code>, which gives instructions to Docker on how to build the image, files to copy, ports to expose, and startup commands.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">docker push</code> - Once you have created your Docker image, you need to store it in a container registry. Container registries are secure, centralized locations to store Docker images. Docker supports a <code class="language-plaintext highlighter-rouge">push</code> command that copies the Docker image to the registry in the repository you specify. A repository is a logical way of grouping and versioning Docker images, and Docker repositories do not necessarily need to match the structure of your GitHub repositories.</p> </li> </ol> <p>After we automate the build process, we also want to automate the release process. This is a technique called Continuous Delivery (CD). Please take a moment to review this brief article talking about why Continuous Delivery is important.</p> <ul> <li><a href="https://docs.microsoft.com/en-us/azure/devops/learn/what-is-continuous-delivery">What is Continuous Delivery?</a></li> </ul> <h2 id="description"> <a href="#description" class="anchor-heading" aria-labelledby="description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>The team at Munson’s Pickles and Preserves would like to see how to implement Continuous Integration and Continuous Delivery (CI/CD) in the context of using Docker containers to build code and GitHub Actions workflows to deploy that code.</p> <ol> <li>Create a new GitHub Actions <code class="language-plaintext highlighter-rouge">.NET</code> workflow. You should be able to find this in the “Continuous integration workflows” section.</li> <li>Review the workflow contents. Then, under the “Setup .NET Core” step, ensure that the .NET version is <code class="language-plaintext highlighter-rouge">6.0.x</code> in order to match the version defined in the Team Messaging System.</li> <li>Ensure that the workflow is configured to trigger on both pushes and pull requests, and then configure both of these triggers with path triggers which only act on changes in the <code class="language-plaintext highlighter-rouge">/Application</code> folder.</li> <li>Update each of the three pre-defined GitHub Actions workflow steps used to build the .NET application. For each of the three steps, you will need to update each command to pass the relative path to the appropriate <code class="language-plaintext highlighter-rouge">.csproj</code> file as an argument. The three steps are <code class="language-plaintext highlighter-rouge">restore</code>, <code class="language-plaintext highlighter-rouge">build</code>, and <code class="language-plaintext highlighter-rouge">test</code>. For <code class="language-plaintext highlighter-rouge">restore</code> and <code class="language-plaintext highlighter-rouge">build</code>, the argument you will pass in is the path to the application csproj file. For <code class="language-plaintext highlighter-rouge">test</code>, the argument you will pass in is the path to the unit test csproj file.</li> <li>Test the workflow by making a small change to application code, such as adding a comment to a file. Commit and push the change, and then ensure that the workflow completes successfully. At this point, any changes pushed to the <code class="language-plaintext highlighter-rouge">/Application</code> folder will automatically trigger the workflow–this is Continuous Integration in action.</li> <li>At the top of your workflow file, create 4 environment variables: <ul> <li><code class="language-plaintext highlighter-rouge">registryName</code> - the full server address of your ACR instance. Set this to “<code class="language-plaintext highlighter-rouge">registryName</code>.azurecr.io”, replacing <code class="language-plaintext highlighter-rouge">registryName</code> with the <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;devopsreg</code> value in your ARM template file on line #26.</li> <li><code class="language-plaintext highlighter-rouge">repositoryName</code> - The repository to target in the registry. Set this to “<code class="language-plaintext highlighter-rouge">techboost/dotnetcoreapp</code>”.</li> <li><code class="language-plaintext highlighter-rouge">dockerFolderPath</code> - The path to the folder that contains the Dockerfile. You will need to point to the folder <code class="language-plaintext highlighter-rouge">Application/src/RazorPagesTestSample</code>.</li> <li><code class="language-plaintext highlighter-rouge">tag</code> - This needs to be a unique value each time, as this is used to version the images in the repository. GitHub makes <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/context-and-expression-syntax-for-github-actions#github-context">environment variables</a> available to help with this. Set <code class="language-plaintext highlighter-rouge">tag</code> to the <a href="https://www.bing.com/search?q=%24%7B%7Bgithub.run_number%7D%7D&amp;form=QBLH&amp;sp=-1&amp;pq=%24%7B%7Bgithub.run_number%7D%7D&amp;sc=0-22&amp;qs=n&amp;sk=&amp;cvid=D84DA66323DC4E14BD794F90FCFD90D3">github.run_number</a> environment variable.</li> </ul> </li> <li>Go to the Azure Portal and get the username, password, and login server for your ACR instance and save these three as GitHub secrets. The names for these secrets should be <code class="language-plaintext highlighter-rouge">ACR_USERNAME</code>, <code class="language-plaintext highlighter-rouge">ACR_PASSWORD</code>, and <code class="language-plaintext highlighter-rouge">ACR_LOGIN_SERVER</code>, respectively.</li> <li>Add a second <strong>job</strong> to your existing .NET Core workflow. Make sure the first step in your second job includes <code class="language-plaintext highlighter-rouge">- uses: actions/checkout@v2</code>.</li> <li>To authenticate to the registry, add a step named <code class="language-plaintext highlighter-rouge">Docker login</code> with the following as the <code class="language-plaintext highlighter-rouge">run</code> command: <code class="language-plaintext highlighter-rouge">docker login $registryName -u ACR_USERNAME -p ACR_PASSWORD</code>. Be sure to use the GitHub secrets for ACR username and ACR password instead of the string literals “ACR_USERNAME” and “ACR_PASSWORD”.</li> <li>To build your image, add a step named <code class="language-plaintext highlighter-rouge">Docker build</code> with the following as the <code class="language-plaintext highlighter-rouge">run</code> command: <code class="language-plaintext highlighter-rouge">docker build -t $registryName/$repositoryName:$tag --build-arg build_version=$tag $dockerFolderPath</code></li> <li>To push your image to ACR, add a step named <code class="language-plaintext highlighter-rouge">Docker push</code> with the following as the <code class="language-plaintext highlighter-rouge">run</code> command: <code class="language-plaintext highlighter-rouge">docker push $registryName/$repositoryName:$tag</code></li> <li>Test the workflow by adding a comment to one of the application files. Commit, push, monitor the workflow. Verify that the GitHub Actions workflow builds a new container image, tags that image, and pushes the image to ACR.</li> <li>Configure your <code class="language-plaintext highlighter-rouge">dev</code> environment to pull the latest container image from ACR. 13.1 - Log into Azure using your service principal, if needed (<a href="https://docs.microsoft.com/en-us/azure/app-service/deploy-container-github-action?tabs=service-principal#tabpanel_CeZOj-G++Q-3_service-principal">hint</a>). 13.2 - Use the <code class="language-plaintext highlighter-rouge">Azure/webapps-deploy@v2</code> <a href="https://github.com/Azure/webapps-deploy">action</a> to update the Web App to pull the latest image from ACR. Key parameters to configure include: <ul> <li><code class="language-plaintext highlighter-rouge">app-name</code> - the name of the wep app instance to target</li> <li><code class="language-plaintext highlighter-rouge">images</code> - the path to the image you pushed to ACR</li> </ul> </li> <li>Make a small change to your application, such as adding a string of display text to <code class="language-plaintext highlighter-rouge">Pages/Index.cshtml</code> in the app. From there, commit and push the change. Then, monitor the workflow and see if the change shows up on the dev instance of the website.</li> <li>Configure your workflow to deploy to your <code class="language-plaintext highlighter-rouge">test</code> and <code class="language-plaintext highlighter-rouge">prod</code> environments. Ensure that each environment includes a manual approval step before deployment.</li> </ol> <h2 id="success-criteria"> <a href="#success-criteria" class="anchor-heading" aria-labelledby="success-criteria"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Success Criteria </h2> <ul> <li>Any changes pushed to the <code class="language-plaintext highlighter-rouge">/Application</code> folder automatically trigger the workflow.</li> <li>.NET Core restore, build, and test steps complete successfully.</li> <li>Each successful workflow run builds a new container image with a unique tag. Each container image should be available in the Azure Container Registry after each successful workflow run.</li> <li>A small change to a file such as <code class="language-plaintext highlighter-rouge">Pages/Index.cshtml</code> automatically shows up on the website running in the <code class="language-plaintext highlighter-rouge">dev</code> environment, <code class="language-plaintext highlighter-rouge">&lt;prefix&gt;devops-dev</code>.azurewebsites.net.</li> <li>Manual approval is required to deploy to the <code class="language-plaintext highlighter-rouge">test</code> and <code class="language-plaintext highlighter-rouge">prod</code> environments.</li> </ul> <h2 id="learning-resources"> <a href="#learning-resources" class="anchor-heading" aria-labelledby="learning-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Learning Resources </h2> <ul> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions/introduction-to-github-actions">Introduction to GitHub Actions</a></li> <li><a href="https://github.com/actions/starter-workflows/blob/dacfd0a22a5a696b74a41f0b49c98ff41ef88427/ci/dotnet-core.yml">.NET Core Action to build and test</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths">Understanding workflow path filters</a></li> <li><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet#dotnet-commands">dotnet commands</a></li> <li><a href="https://github.com/Azure/actions">GitHub Actions for Azure</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#env">Environment variables</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/learn-github-actions/introduction-to-github-actions">Introduction to GitHub Actions</a></li> <li><a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#onpushpull_requestpaths">Understanding workflow path filters</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-authentication#admin-account">Authenticate with an Azure container registry</a></li> <li><a href="https://github.com/Azure/actions">GitHub Actions for Azure</a></li> <li><a href="https://docs.microsoft.com/en-us/azure/app-service/deploy-container-github-action?tabs=service-principal#tabpanel_CeZOj-G++Q-3_service-principal">Deploy a custom container to App Service using GitHub Actions</a></li> <li><a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment">Using environments for deployment</a></li> </ul> <h2 id="advanced-challenges-optional"> <a href="#advanced-challenges-optional" class="anchor-heading" aria-labelledby="advanced-challenges-optional"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced Challenges (optional) </h2> <p>If the GitHub Actions workflow fails, GitHub sends an e-mail to the repository owner. Sometimes, however, you may wish to log the failure or even create a GitHub issue upon failure. Add a step to your workflow which creates a GitHub issue if there is a failure at any point in the workflow.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
